(function(t){function a(a){for(var n,s,i=a[0],l=a[1],c=a[2],u=0,h=[];u<i.length;u++)s=i[u],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&h.push(o[s][0]),o[s]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);d&&d(a);while(h.length)h.shift()();return r.push.apply(r,c||[]),e()}function e(){for(var t,a=0;a<r.length;a++){for(var e=r[a],n=!0,i=1;i<e.length;i++){var l=e[i];0!==o[l]&&(n=!1)}n&&(r.splice(a--,1),t=s(s.s=e[0]))}return t}var n={},o={app:0},r=[];function s(a){if(n[a])return n[a].exports;var e=n[a]={i:a,l:!1,exports:{}};return t[a].call(e.exports,e,e.exports,s),e.l=!0,e.exports}s.m=t,s.c=n,s.d=function(t,a,e){s.o(t,a)||Object.defineProperty(t,a,{enumerable:!0,get:e})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,a){if(1&a&&(t=s(t)),8&a)return t;if(4&a&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(s.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&a&&"string"!=typeof t)for(var n in t)s.d(e,n,function(a){return t[a]}.bind(null,n));return e},s.n=function(t){var a=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(a,"a",a),a},s.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=a,i=i.slice();for(var c=0;c<i.length;c++)a(i[c]);var d=l;r.push([0,"chunk-vendors"]),e()})({0:function(t,a,e){t.exports=e("56d7")},"56d7":function(t,a,e){"use strict";e.r(a);e("e260"),e("e6cf"),e("cca6"),e("a79d");var n=e("2b0e"),o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-app",[e("router-view")],1)},r=[],s={name:"App",data:function(){return{}}},i=s,l=e("2877"),c=e("6544"),d=e.n(c),u=e("7496"),h=Object(l["a"])(i,o,r,!1,null,null,null),m=h.exports;d()(h,{VApp:u["a"]});var v=e("8c4f"),g=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-app",{staticStyle:{background:"#110C3A"},attrs:{id:"musica"}},[e("v-card",{attrs:{color:"#110C3A",height:"50px"}},[e("v-toolbar",{staticStyle:{background:"linear-gradient(to right,  #110C3A, #351442, #4C1E45, #351442, #110C3A)"},attrs:{dark:""}},[e("v-app-bar-nav-icon",{on:{click:function(a){t.drawer=!t.drawer}}}),e("v-toolbar-title",[e("span",{staticStyle:{"font-size":"20pt","font-family":"'Helvetica'",weight:"black"}},[t._v(" MUSIC ~ "+t._s(t.userName))])]),e("v-spacer"),e("v-btn",{attrs:{icon:""},on:{click:function(a){return t.cambiarPantalla("Favoritas")}}},[e("v-icon",[t._v("mdi-heart")])],1),e("v-btn",{attrs:{icon:""},on:{click:function(a){return t.cambiarPantalla("Entrada")}}},[e("v-icon",[t._v("mdi-exit-to-app")])],1)],1)],1),e("v-sheet",{staticClass:"overflow-y-auto",attrs:{id:"scrolling-techniques-3","max-height":"850",color:"#110C3A"}},[e("v-main",[e("v-carousel",{attrs:{cycle:"",height:"400","hide-delimiter-background":"","show-arrows-on-hover":"",align:"center",justify:"center"}},t._l(this.slides,(function(a,n){return e("v-carousel-item",{key:n,attrs:{src:a.src,position:a.position}},[e("v-row",{staticClass:"fill-height",attrs:{align:"center",justify:"center"}},[e("div",{class:a.class},[t._v(t._s(a.text))])])],1)})),1),e("v-card",{staticStyle:{background:"linear-gradient(to right,  #110C3A, #351442, #4C1E45, #351442, #110C3A)"},attrs:{dark:"",height:"100px"}},[e("v-toolbar",{staticStyle:{background:"linear-gradient(to right,  #110C3A, #351442, #4C1E45, #351442, #110C3A)"},attrs:{height:"120px",dark:""}},[e("v-spacer"),e("v-toolbar-title",[t._v(" Género: "),e("v-combobox",{attrs:{items:t.generos,outlined:"",dense:"",rounded:""},model:{value:t.genre,callback:function(a){t.genre=a},expression:"genre"}})],1),e("v-spacer"),e("v-toolbar-title",[t._v(" Artista: "),e("v-combobox",{attrs:{items:t.artistas,outlined:"",dense:"",rounded:""},model:{value:t.artist,callback:function(a){t.artist=a},expression:"artist"}})],1),e("v-spacer"),e("v-toolbar-title",[t._v(" Búsqueda por título: "),e("v-text-field",{attrs:{rounded:"",outlined:"",dense:"",label:"Search"},on:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.getSong()}},model:{value:t.busqueda,callback:function(a){t.busqueda=a},expression:"busqueda"}})],1),e("v-spacer"),e("v-toolbar-title",[t._v(" Ordenar por: "),e("v-combobox",{attrs:{items:t.types,label:"Cualquiera",multiple:"multiple",outlined:"",dense:"",rounded:""},model:{value:t.type,callback:function(a){t.type=a},expression:"type"}})],1),e("v-spacer")],1)],1),e("v-card",{attrs:{color:"2F123F",height:"50px"}},[e("v-toolbar",{staticStyle:{background:"linear-gradient(to right,  #110C3A, #351442, #4C1E45, #351442, #110C3A)"},attrs:{height:"50px",dark:""}},[e("v-spacer"),e("v-spacer"),e("v-btn",{staticStyle:{background:"#4C1E45"},on:{click:function(a){return t.getSong()}}},[t._v("Buscar")]),e("v-spacer"),e("v-btn",{staticStyle:{background:"#4C1E45"},on:{click:function(a){return t.randomSong()}}},[t._v("¡Recomendación aleatoria!")]),e("v-spacer"),e("v-btn",{staticStyle:{background:"#4C1E45"},on:{click:function(a){return t.personalizedSong()}}},[t._v("¡Recomendación personalizada!")]),e("v-spacer"),e("v-spacer")],1)],1),e("v-card",{attrs:{color:"2F123F",height:"50px"}},[e("v-toolbar",{staticStyle:{background:"linear-gradient(to right,  #110C3A, #351442, #4C1E45, #351442, #110C3A)"},attrs:{height:"50px",dark:""}},[e("v-spacer"),e("v-spacer"),e("v-btn",{staticStyle:{background:"#4C1E45"},on:{click:function(a){return t.colaborativeFilter()}}},[t._v("¡Recomendación personalizada según los gustos de otros usuarios similares a ti!")]),e("v-spacer"),e("v-spacer")],1)],1)],1),e("v-container",{attrs:{"grid-list-md":"","text-xs-center":"",fluid:"","pa-12":""}},[e("v-layout",{attrs:{row:"",wrap:"","fill-height":"","fill-width":""}},[e("v-row",{attrs:{dense:""}},[e("v-col",{attrs:{cols:"12"}},t._l(t.songs,(function(a,n){return e("v-col",{key:n,attrs:{cols:"flex"}},[e("v-card",{attrs:{color:a.color,dark:""}},[e("div",{staticClass:"d-flex flex-no-wrap justify-space-between"},[e("div",[e("v-card-title",{staticClass:"headline",domProps:{textContent:t._s(a.name)}}),e("v-card-subtitle",{domProps:{textContent:t._s(a.artist)}}),e("v-card-text",{domProps:{textContent:t._s(a.genre)}})],1),e("table",{attrs:{height:"50%"}},[e("tr",[e("td",{attrs:{valign:"middle",align:"center"}},[e("iframe",{attrs:{src:a.preview,width:"300",height:"80",margin:"10px",frameborder:"0",allowtransparency:"true",allow:"encrypted-media"}})]),e("td",{attrs:{valign:"middle",align:"center"}},[e("span",{staticStyle:{color:"transparent"}},[t._v("holaaaa")]),e("v-btn",{attrs:{icon:""},on:{click:function(e){return t.addDislike(a)}}},[e("v-icon",[t._v(" "+t._s(a.iconD)+" ")])],1),e("v-btn",{attrs:{icon:""},on:{click:function(e){return t.addFavs(a)}}},[e("v-icon",[t._v(" "+t._s(a.iconF)+" ")])],1),e("span",{staticStyle:{color:"transparent"}},[t._v("holaaaa")])],1),e("td",{attrs:{valign:"middle",align:"center"}},[e("v-avatar",{staticClass:"ma-3",attrs:{size:"125",tile:""}},[e("v-img",{attrs:{src:a.cover}})],1)],1)])])])])],1)})),1),e("v-col",{attrs:{cols:"12"}},[e("v-col",{attrs:{cols:"flex"}},[e("div",{staticClass:"d-flex flex-no-wrap justify-space-between"},[t.visible?e("v-btn",{staticStyle:{background:"#4C1E45"},attrs:{id:"botonMostrarMas",dark:"",cols:"flex",valign:"middle",align:"center"},on:{click:function(a){return t.getAllRecommendSongs()}}},[t._v("¡Mostrar más!")]):t._e()],1)])],1)],1)],1)],1),e("v-navigation-drawer",{staticStyle:{background:"linear-gradient(to left,  #110C3A, #351442, #4C1E45)"},attrs:{temporary:"",absolute:"",color:"#110C3A",dark:""},model:{value:t.drawer,callback:function(a){t.drawer=a},expression:"drawer"}},[e("v-list-item",[e("v-list-item-avatar",[e("v-icon",{attrs:{large:""}},[t._v("mdi-menu")])],1),e("v-list-item-title",[t._v("Menú")]),e("v-btn",{attrs:{icon:""},on:{click:function(a){a.stopPropagation(),t.drawer=!t.drawer}}},[e("v-icon",[t._v("mdi-chevron-left")])],1)],1),e("v-divider"),e("v-list",{staticClass:"pa-0",attrs:{dense:"",flat:""}},[e("v-list-item-group",t._l(t.items,(function(a){return e("v-list-item",{key:a.title,on:{click:function(e){return t.cambiarPantalla(a.link)}}},[e("v-list-item-action",[e("v-icon",[t._v(t._s(a.icon))])],1),e("v-list-item-content",[e("v-list-item-title",[t._v(t._s(a.title))])],1)],1)})),1)],1)],1)],1)],1)},p=[],f=(e("c975"),e("a434"),e("b0c0"),e("bc3a")),b="http://127.0.0.1:3000";document.cookie="same-site-cookie=foo; SameSite=Lax",document.cookie="cross-site-cookie=bar; SameSite=None; Secure";var y={props:{source:String},name:"App",data:function(){return{name:"inicio",userName:"",busqueda:"",drawer:!1,genre:"Cualquiera",artist:"Cualquiera",changeIcon:"",dni:this.$route.query.dni,art:"",visible:!1,type:[],num:0,aux:[],songs:[],generos:[],artistas:[],favs:[],hateds:[],historial:[],usuariosVecinos:[],vecinosDepurados:[],songsNoDepuradas:[],songsDepuradas:[],slides:[{position:"center",text:"Descubre nuevos artistas",src:"https://elnuevopais.net/wp-content/uploads/2017/09/Bad-Bunny.jpg",class:"display-3"},{position:"center",text:"Encuentra música adaptada a tus gustos",src:"https://s1.eestatic.com/2020/07/03/invertia/empresas/Musica-Festivales_de_musica-Turismo-Mad_Cool-Benidorm-Coronavirus-Enfermedades_infecciosas-Infecciones-Impacto_coronavirus-Empresas_502461416_155038081_1706x960.jpg",class:"display-3 white--text"},{position:"center",text:"Descubre música de forma aleatoria",src:"https://ocioenlasierra.com/wp-content/uploads/2019/09/concierto-fiesta-1.jpg",class:"display-3"},{position:"center",text:"Recomendaciones sólo para tí",src:"https://image.freepik.com/foto-gratis/dj-profesional-mezclador-musica-fiesta-concierto-electronico_118086-2831.jpg",class:"display-3 white--text"}],items:[{title:"Inicio",icon:"mdi-home",link:"Home"},{title:"Favoritos",icon:"mdi-heart",link:"Favoritas"},{title:"Ayuda",icon:"mdi-help",link:"Help"},{title:"Cerrar Sesión",icon:"mdi-exit-to-app",link:"Entrada"}],types:["Más Animadas primero","Menos Animadas primero","Más Bailables primero","Menos Bailables primero","Más Enérgicas primero","Más Tranquilas primero","Más Populares primero","Menos Populares primero"],colors:["#952175","#00ACC1","#FFB300","#E91E63","#8BC34A"]}},mounted:function(){console.log("ESTOY EN MOUNTED DE "+this.dni),this.filtros(),console.log("SALGO DE MOUNTED\n\n")},watch:{genre:function(){""!=this.genre&&"Cualquiera"!=this.genre?this.rellenaArtistaG(this.genre):(this.filtros(),this.rellenarArtistas())},type:function(){if(this.type.length>2){alert("Puede aplicar un máximo de 2 opciones de ordenación.");for(var t=2;t<this.type.length;t++)this.type.splice(t,1)}}},methods:{cambiarPantalla:function(t){console.log(this.$route.path),"Home"==t?(this.songs=[],this.filtros(),this.drawer=!this.drawer):this.$router.push({name:t,query:{dni:this.dni}})},getName:function(){var t=this;f.post(b+"/getUserName",{dni:this.dni}).then((function(a){var e={msg:"Error"};JSON.stringify(a.data)==JSON.stringify(e)?alert("Datos mal introducidos"):(console.log(a.data),t.userName=a.data)}))},estaEnFavs:function(t,a){var e=this;console.log("Estoy en saber si una cancion esta en fav."),0==a&&this.getFavs();var n=!1;return setTimeout((function(){for(var a=0;a<e.favs.length;a++)if(e.favs[a].name==t.name){n=!0;break}}),100),n},addFavs:function(t){var a=this;console.log("Canción añadida a favoritas."),this.getFavs(),this.getHateds();var e=3,n=!1,o=!1;setTimeout((function(){console.log(a.favs.length);for(var r=0;r<a.favs.length;r++){if(a.favs[r].name==t.name){alert("Canción eliminada de favoritos."),t.iconF="mdi-heart-outline",a.filtros(),n=!0,e=0;break}console.log("Esta canción no estaba en favoritos")}if(0==n)for(var s=0;s<a.hateds.length;s++){if(a.hateds[s].name==t.name){alert("Canción eliminada de lista de canciones que no te gustan."),t.iconD="mdi-thumb-down-outline",a.filtros(),o=!0,e=1;break}console.log("Esta canción no estaba en canciones que no te gustan")}1==n||1==o?(console.log("Borro relaciones existentes"),f.post(b+"/postDeleteRelation",{name:t.name,artist:t.artist,dni:a.dni,type:e}).then((function(t){console.log(t.data)}))):console.log("No existian relaciones"),a.getFavs(),console.log(a.favs),0==n&&(console.log("La añado a favoritos "+t.name),f.post(b+"/postNewSongLiked",{name:t.name,dni:a.dni,artist:t.artist}).then((function(e){console.log(e.data),t.iconF="mdi-heart",a.filtros()})))}),100),console.log("Salgo de añadir a favoritos")},addDislike:function(t){var a=this;console.log("Canción añadida a canciones que no te gustan."),this.getFavs(),this.getHateds();var e=3,n=!1,o=!1;setTimeout((function(){for(var r=0;r<a.hateds.length;r++)if(a.hateds[r].name==t.name){alert("Canción eliminada de canciones que no te gustan."),t.iconD="mdi-thumb-down-outline",a.filtros(),o=!0,e=1;break}if(0==o)for(var s=0;s<a.favs.length;s++)if(a.favs[s].name==t.name){alert("Canción eliminada de favoritas."),t.iconF="mdi-heart-outline",a.filtros(),n=!0,e=0;break}1!=n&&1!=o||f.post(b+"/postDeleteRelation",{name:t.name,dni:a.dni,artist:t.artist,type:e}).then((function(t){console.log(t.data)})),0==o&&f.post(b+"/postNewSongHated",{name:t.name,dni:a.dni,artist:t.artist}).then((function(e){console.log(e.data),t.iconD="mdi-thumb-down",a.filtros()}))}),100)},filtros:function(){this.genre="Cualquiera",this.artist="Cualquiera",this.rellenarGeneros(),this.rellenarArtistas(),this.getName()},rellenarGeneros:function(){var t=this;console.log("ESTOY EN RELLENAR GENEROSSS"),this.generos=[],this.generos.length<=0&&(f.get(b+"/getGeneros").then((function(a){for(var e=0;e<a.data.length;e++)null!=a.data[e]&&t.generos.push(a.data[e])})),this.generos.push("Cualquiera"),console.log("SALGO DE RELLENAR GENEROS\n\n"))},rellenarArtistas:function(){var t=this;console.log("ESTOY EN RELLENAR ARTISTASSS"),this.artistas=[],f.get(b+"/getArtistas").then((function(a){for(var e=0;e<a.data.length;e++)null!=a.data[e]&&t.artistas.push(a.data[e])})),this.artistas.push("Cualquiera"),console.log("SALGO DE RELLENAR ARTISTAS\n\n")},rellenaArtistaG:function(t){var a=this;console.log("ESTOY EN RELLENAR ARTISTAS DE UN GENERO "+t),f.get(b+"/getArtistasG",{params:{genre:t}}).then((function(t){a.artistas=[];for(var e=0;e<t.data.length;e++)a.artistas.push(t.data[e])})),this.artistas.push("Cualquiera"),console.log("SALGO DE RELLENAR ARTISTAS DE UN GENERO\n\n")},randomSong:function(){var t=this;console.log("ESTOY EN RANDOM SONG"),this.songs=[],this.getFavs(),this.getHateds(),setTimeout((function(){var a=Math.floor(Math.random()*t.generos.length),e=t.generos[a];f.get(b+"/getRandomSongs",{params:{genre:e,dni:t.dni}}).then((function(a){if(" ERROR"==a.data[0])alert(a.data[0]);else if(void 0==a.data[0])t.randomSong();else{var e=!1;do{for(var n=Math.floor(Math.random()*a.data.length),o=!1,r=!1,s=0;s<t.favs;s++)if(a.data[n].name==t.favs[s].name){o=!0;break}if(0==o)for(var i=0;i<t.hateds;i++)if(a.data[n].name==t.hateds[i].name){r=!0;break}0==o&&0==r&&(t.songs.push(a.data[n]),e=!0)}while(0==e);t.songs[0].color=t.colors[Math.floor(Math.random()*t.colors.length)],t.songs[0].iconF="mdi-heart-outline",t.songs[0].iconD="mdi-thumb-down-outline"}}))}),200),this.type=[],this.artist="Cualquiera",this.busqueda="",this.genre="Cualquiera",console.log("SALGO DE RANDOM SONG\n\n")},getSong:function(){var t=this;console.log("ESTOY EN GET SONG"),this.songs=[],this.getFavs(),this.getHateds();for(var a=0;a<this.type.length;a++)for(var e=0;e<this.types.length;e++)this.type[a]==this.types[e]&&(0==e?this.aux[a]="+animada":1==e?this.aux[a]="-animada":2==e?this.aux[a]="+bailable":3==e?this.aux[a]="-bailable":4==e?this.aux[a]="+energica":5==e?this.aux[a]="-energica":6==e?this.aux[a]="+popular":7==e&&(this.aux[a]="-popular"));0==this.type.length&&(this.aux[0]="No"),f.get(b+"/getSongs",{params:{genre:this.genre,artist:this.artist,type:this.aux,busqueda:this.busqueda}}).then((function(a){if("No hay canciones que cumplan estos criterios de búsqueda."==a.data[0])alert(a.data[0]);else{t.num=0;for(var e=0;e<a.data.length;e++)t.songs.push(a.data[e]),t.songs[e].color=t.colors[t.num],t.songs[e].iconF="mdi-heart-outline",t.songs[e].iconD="mdi-thumb-down-outline",t.num=t.num+1,t.num==t.colors.length&&(t.num=0);for(var n=0;n<t.songs.length;n++){if(t.favs.length>0)for(var o=0;o<t.favs.length;o++)t.songs[n].name==t.favs[o].name&&(t.songs[n].iconF="mdi-heart",o=t.favs.length);if(t.hateds.length>0)for(var r=0;r<t.hateds.length;r++)t.songs[n].name==t.hateds[r].name&&(t.songs[n].iconD="mdi-thumb-down",r=t.hateds.length)}}})),this.aux=[],this.type=[],this.artist="Cualquiera",this.busqueda="",this.genre="Cualquiera",console.log("SALGO DE GET SONG\n\n")},getFavs:function(){var t=this;this.favs=[],console.log("ESTOY en GETFAVS"),f.post(b+"/getFavs",{dni:this.dni}).then((function(a){var e={msg:"Error"};JSON.stringify(a.data)==JSON.stringify(e)?console.log("No tienes canciones favoritas."):t.favs=a.data}))},getHateds:function(){var t=this;this.hateds=[],console.log("ESTOY en GETHATEDS"),f.post(b+"/getHateds",{dni:this.dni}).then((function(a){var e={msg:"Error"};JSON.stringify(a.data)==JSON.stringify(e)?console.log("No tienes canciones odiadas."):t.hateds=a.data}))},personalizedSong:function(){var t=this;console.log("Estamos en la función PERSONALIZED SONG");var a="",e="",n=0,o=0,r=[],s=[];this.songs=[],this.getFavs(),this.getHateds(),setTimeout((function(){for(var i=0;i<t.favs.length;i++)for(var l=1,c=1,d=i;d<t.favs.length;d++)t.favs[i].genre==t.favs[d].genre&&l++,n<l&&(n=l,a=t.favs[i].genre),t.favs[i].artist==t.favs[d].artist&&c++,o<c&&(o=c,e=t.favs[i].artist);t.rellenaArtistaG(a);var u=!1;setTimeout((function(){for(var n=0;n<t.artistas.length;n++)if(t.artistas[n]==e){u=!0;break}if(0==u&&(e=""),""==a&&""==e){alert("No se puede dar una recomendación personalizada ya que no hay datos suficientes. La recomendación será aleatoria.");var o=Math.floor(Math.random()*t.generos.length);a=t.generos[o],t.rellenaArtistaG(a);var i=Math.floor(Math.random()*t.artistas.length);e=t.artistas[i]}else if(""==e)console.log("No hay artista frecuente"),f.get(b+"/getArtistasG",{params:{genre:a}}).then((function(a){if(void 0==a.data[0])t.personalizedSong();else{for(var n=0,o=0;o<a.data.length;o++)s.push(a.data[o]),n=o;if(n>=1){var r=Math.floor(Math.random()*s.length);e=s[r]}else e=""}}));else if(""==a){console.log("No hay genero frecuente"),f.get(b+"/getGenerosA",{params:{artist:e}}).then((function(t){for(var a=0;a<t.data.length;a++)r.push(t.data[a])}));var l=Math.floor(Math.random()*r.length);a=r[l]}""!=t.art?t.artist=e:(t.artist="",t.art=""),t.genre=a,f.get(b+"/getPersonalizedSongs",{params:{genre:t.genre,artist:t.artist,dni:t.dni}}).then((function(a){if("No hay canciones que cumplan estos criterios de búsqueda."==a.data[0])alert(a.data[0]);else if(void 0==a.data[0])t.personalizedSong();else{var e=!1;do{for(var n=Math.floor(Math.random()*a.data.length),o=!1,r=!1,s=0;s<t.favs;s++)if(a.data[n].name==t.favs[s].name){o=!0;break}if(0==o)for(var i=0;i<t.hateds;i++)if(a.data[n].name==t.hateds[i].name){r=!0;break}0==o&&0==r&&(t.songs.push(a.data[n]),e=!0)}while(0==e);t.songs[0].color=t.colors[Math.floor(Math.random()*t.colors.length)],t.songs[0].iconF="mdi-heart-outline",t.songs[0].iconD="mdi-thumb-down-outline"}})),t.type=[],t.artist="Cualquiera",t.busqueda="",t.genre="Cualquiera"}),100)}),200),console.log("Salimos de la función PERSONALIZED SONG")},colaborativeFilter:function(){var t=this;console.log("Estamos en la función COLABORATIVE FILTER Máximo de 5 canciones recomendadas");var a=this.favs.length;this.getFavs(),setTimeout((function(){if(console.log(t.favs),t.favs.length>=5)if(t.favs.length==a){t.num=0,t.songs=[],t.songsDepuradas.length>5?(t.visible=!0,alert("Mostrando las 5 canciones más recomendadas ordenadas de más a menos recomendadas. Pulsa el botón 'Mostrar Más' para ver todas las canciones recomendadas.")):t.songsDepuradas.length>=1?alert("Mostrando las canciones más recomendadas ordenadas de más a menos recomendadas. Sigue descubriendo música para obtener más recomendaciones."):alert("No hay canciones recomendadas para ti.");for(var e=0;e<t.songsDepuradas.length;e++)if(t.songs.push(t.songsDepuradas[e]),t.songs[e].color=t.colors[t.num],t.songs[e].iconF="mdi-heart-outline",t.songs[e].iconD="mdi-thumb-down-outline",t.num=t.num+1,t.num==t.colors.length)break}else t.usuariosVecinos=[],t.buscarUsuariosVecinos(),t.vecinosDepurados=[],setTimeout((function(){t.depurarUsuariosVecinos(),setTimeout((function(){t.vecinosDepurados.length<1?alert("No hay suficientes usuarios con gustos similares a los tuyos como para hacer una recomendación."):(t.depurarUsuariosPorCanciones(),setTimeout((function(){t.depurarCancionesRecomendadas(),setTimeout((function(){t.songs=[],t.reordenarRecomendacion(),t.num=0,t.songsDepuradas.length>5?(t.visible=!0,alert("Mostrando las 5 canciones más recomendadas ordenadas de más a menos recomendadas. Pulsa el botón 'Mostrar Más' para ver todas las canciones recomendadas.")):t.songsDepuradas.length>=1?alert("Mostrando las canciones más recomendadas ordenadas de más a menos recomendadas. Sigue descubriendo música para obtener más recomendaciones."):alert("No hay canciones recomendadas para ti.");for(var a=0;a<t.songsDepuradas.length;a++)if(t.songs.push(t.songsDepuradas[a]),t.songs[a].color=t.colors[t.num],t.songs[a].iconF="mdi-heart-outline",t.songs[a].iconD="mdi-thumb-down-outline",t.num=t.num+1,t.num==t.colors.length)break}),200)}),200))}),300)}),300);else alert("No tiene suficientes canciones favoritas como para realizar una recomendación personalizada.")}),500),console.log("Salimos de la función COLABORATIVE FILTER")},getAllRecommendSongs:function(){console.log("Mostrar todas las recomendaciones"),this.num=0;for(var t=5;t<this.songsDepuradas.length;t++)this.songs.push(this.songsDepuradas[t]),this.songs[t].color=this.colors[this.num],this.songs[t].iconF="mdi-heart-outline",this.songs[t].iconD="mdi-thumb-down-outline",this.num=this.num+1,this.num==this.colors.length&&(this.num=0);this.visible=!1},buscarUsuariosVecinos:function(){for(var t=this,a=0;a<this.favs.length;a++)f.post(b+"/getNeighbours",{name:this.favs[a].name}).then((function(a){var e={msg:"Error, no hay usuarios vecinos"};if(JSON.stringify(a.data[0])==JSON.stringify(e))alert("Ups, se detectó un error, no hay usuarios vecinos.");else for(var n=0;n<a.data.length;n++)t.usuariosVecinos.push(a.data[n]),console.log(a.data[n])})).catch((function(t){console.log(t)}))},depurarUsuariosVecinos:function(){console.log("VECINOS DEPURADOS");for(var t=0;t<this.usuariosVecinos.length;t++)for(var a=0,e=0;e<this.usuariosVecinos.length;e++)if(this.usuariosVecinos[t]==this.usuariosVecinos[e]&&a++,a>=2){var n=!1;if(this.vecinosDepurados.length>0){for(var o=0;o<this.vecinosDepurados.length;o++)if(this.vecinosDepurados[o]==this.usuariosVecinos[t]){n=!0;break}0==n&&(console.log(this.usuariosVecinos[t]),this.vecinosDepurados.push(this.usuariosVecinos[t]))}else console.log(this.usuariosVecinos[t]),this.vecinosDepurados.push(this.usuariosVecinos[t]);break}var r=this.vecinosDepurados.indexOf(this.dni);this.vecinosDepurados.splice(r,1),console.log("VECINOS DEPURADOS = "+this.vecinosDepurados.length)},depurarUsuariosPorCanciones:function(){var t=this;this.songsNoDepuradas=[];for(var a=0;a<this.vecinosDepurados.length;a++)console.log("DEPURAMOS POR CANCIONES"),f.post(b+"/getSongsColaborativeFilter",{usuario:this.vecinosDepurados[a],dni:this.dni}).then((function(a){var e={msg:"Error, no hay canciones recomendadas por filtrado colaborativo"};if(JSON.stringify(a.data[0])==JSON.stringify(e))alert("No hay canciones que mostrar por filtrado colaborativo.");else for(var n=0;n<a.data.length;n++)console.log(a.data[n]),t.songsNoDepuradas.push(a.data[n])})).catch((function(t){console.log(t)}))},depurarCancionesRecomendadas:function(){console.log("Estamos en la función DEPURAR CANCIONES RECOMENDADAS"),this.songsDepuradas=[];for(var t=0;t<this.songsNoDepuradas.length;t++)for(var a=0,e=0;e<this.songsNoDepuradas.length;e++)if(this.songsNoDepuradas[t].name==this.songsNoDepuradas[e].name&&a++,a>=2){for(var n=!1,o=0,r=0;r<this.songsNoDepuradas.length;r++)this.songsNoDepuradas[t].name==this.songsNoDepuradas[r].name&&o++;if(this.songsDepuradas.length>0){for(var s=0;s<this.songsDepuradas.length;s++)if(this.songsDepuradas[s].name==this.songsNoDepuradas[t].name){n=!0;break}0==n&&(this.songsNoDepuradas[t]["num"]=o,this.songsDepuradas.push(this.songsNoDepuradas[t]))}else this.songsNoDepuradas[t]["num"]=o,this.songsDepuradas.push(this.songsNoDepuradas[t]);break}console.log("Salimos de la función DEPURAR CANCIONES RECOMENDADAS")},reordenarRecomendacion:function(){console.log("Reordenamos las canciones"),this.songsDepuradas.sort((function(t,a){return t.num<a.num?1:t.num>a.num?-1:0}))}}},C=y,S=(e("cccb"),e("5bc1")),E=e("8212"),A=e("8336"),k=e("b0af"),V=e("99d9"),x=e("5e66"),N=e("3e35"),_=e("62ad"),D=e("2b5d"),w=e("a523"),O=e("ce7e"),T=e("132d"),I=e("adda"),R=e("a722"),q=e("8860"),M=e("da13"),F=e("1800"),L=e("8270"),P=e("5d23"),G=e("1baa"),j=e("f6c4"),z=e("f774"),B=e("0fd9"),U=e("8dd9"),$=e("2fa4"),H=e("8654"),J=e("71d9"),Y=e("2a7f"),Q=Object(l["a"])(C,g,p,!1,null,null,null),Z=Q.exports;d()(Q,{VApp:u["a"],VAppBarNavIcon:S["a"],VAvatar:E["a"],VBtn:A["a"],VCard:k["a"],VCardSubtitle:V["b"],VCardText:V["c"],VCardTitle:V["d"],VCarousel:x["a"],VCarouselItem:N["a"],VCol:_["a"],VCombobox:D["a"],VContainer:w["a"],VDivider:O["a"],VIcon:T["a"],VImg:I["a"],VLayout:R["a"],VList:q["a"],VListItem:M["a"],VListItemAction:F["a"],VListItemAvatar:L["a"],VListItemContent:P["a"],VListItemGroup:G["a"],VListItemTitle:P["b"],VMain:j["a"],VNavigationDrawer:z["a"],VRow:B["a"],VSheet:U["a"],VSpacer:$["a"],VTextField:H["a"],VToolbar:J["a"],VToolbarTitle:Y["a"]});var K=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-app",{staticStyle:{background:"#110C3A"},attrs:{id:"musica"}},[e("v-card",{attrs:{color:"#110C3A",height:"50px"}},[e("v-toolbar",{staticStyle:{background:"linear-gradient(to right,  #110C3A, #351442, #4C1E45, #351442, #110C3A)"},attrs:{dark:""}},[e("v-toolbar-title",[e("span",{staticStyle:{"font-size":"20pt","font-family":"'Helvetica'",weight:"black"}},[t._v(" MENÚ DE AYUDA ")])]),e("v-spacer"),e("v-btn",{attrs:{icon:""},on:{click:function(a){return t.cambiarPantalla("/home")}}},[e("v-icon",[t._v("mdi-home")])],1),e("v-btn",{attrs:{icon:""},on:{click:function(a){return t.cambiarPantalla("/")}}},[e("v-icon",[t._v("mdi-exit-to-app")])],1)],1)],1),e("v-spacer"),e("v-card",{staticStyle:{background:"linear-gradient(to left, #110C3A, #351442, #4C1E45, #351442, #110C3A)"},attrs:{dark:""}},[e("v-card-title",{staticClass:"headline"},[t._v(" Menú de ayuda de la aplicación. ")]),e("v-card-subtitle",[e("br"),t._v("Esta aplicación te ayudará a descubrir música nueva."),e("br"),e("br"),t._v(" Podrás ver a que género pertenece, quién la canta, su portada y podrás escuchar una preview."),e("br"),e("br"),t._v(' Tan solo tienes que pulsar sobre el botón "Recomiéndame algo aleatorio" si quieres descubir música completamente nueva, de diferentes géneros y artistas.'),e("br"),e("br"),t._v(' Si quieres buscar alguna canción de un género o artista en concreto, o con alguna palabra en su nombre, selecciona los parámetros que deseas y pulsa sobre el botón "Buscar".'),e("br"),t._v(" Cuándo busques canciones con tus filtros, podrás ordenarla según unos parámetros."),e("br"),e("br"),t._v(' Si quieres una recomendación personalizada basada en tus gustos, solo tienes que pulsar sobre el botón "Recomiéndame algo personalizado".'),e("br"),e("br"),t._v(' Si quieres una recomendación personalizada por medio de un filtro colaborativo, solo tienes que pulsar sobre el botón "Recomendación personalizada según los gustos de otros usuarios similares a ti"'),e("br"),e("br"),t._v(" Esta recomendación utiliza un algoritmo de filtrado colaborativo que se encarga de buscar usuarios con gustos similares a los tuyos para poder recomendarte algo que te pueda gustar según sus opiniones."),e("br"),e("br"),t._v(" Siempre que te guste una canción podrás guardarla en tu lista de favoritos pulsando sobre el botón del corazón."),e("br"),e("br"),t._v(" Puedes acceder a tu lista de canciones favoritas pulsando sobre el botón del corazón de la barra superior, o en el que se encuentra en el menú desplegable de la izquierda."),e("br"),e("br"),e("br"),t._v("¡Conoce mucha música nueva y diviértete!"),e("br")])],1),e("v-spacer")],1)},W=[],X=(e("ac1f"),e("5319"),e("bc3a")),tt="http://127.0.0.1:3000",at={data:function(){return{drawer:!1,dni:this.$route.query.dni}},mounted:function(){console.log("ESTOY EN MOUNTED DE AYUDA DE "+this.dni),this.getName(),console.log(this.dni),console.log("SALGO DE MOUNTED\n\n")},methods:{cambiarPantalla:function(t){console.log("QUEREMOS CAMBIAR DE PANTALLA"),"/home"==t?this.$router.replace({path:"/home",query:{dni:this.dni}}):this.$router.push({path:t,query:{dni:this.dni}})},getName:function(){var t=this;X.post(tt+"/getUserName",{dni:this.dni}).then((function(a){var e={msg:"Error"};JSON.stringify(a.data)==JSON.stringify(e)?alert("Datos mal introducidos"):(console.log(a.data),t.userName=a.data)}))}}},et=at,nt=Object(l["a"])(et,K,W,!1,null,null,null),ot=nt.exports;d()(nt,{VApp:u["a"],VBtn:A["a"],VCard:k["a"],VCardSubtitle:V["b"],VCardTitle:V["d"],VIcon:T["a"],VSpacer:$["a"],VToolbar:J["a"],VToolbarTitle:Y["a"]});var rt=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-app",{staticStyle:{background:"#110C3A"},attrs:{id:"musica"}},[e("v-card",{attrs:{color:"#110C3A",height:"50px"}},[e("v-toolbar",{staticStyle:{background:"linear-gradient(to right,  #110C3A, #351442, #4C1E45, #351442, #110C3A)"},attrs:{dark:""}},[e("v-app-bar-nav-icon",{on:{click:function(a){t.drawer=!t.drawer}}}),e("v-toolbar-title",[e("span",{staticStyle:{"font-size":"20pt","font-family":"'Helvetica'",weight:"black"}},[t._v(" MUSIC")])]),e("v-spacer"),e("v-btn",{attrs:{icon:""}},[e("v-icon",[t._v("mdi-heart")])],1)],1)],1),e("v-spacer"),e("v-container",{attrs:{fluid:""}},[e("v-row",{attrs:{dense:""}},[e("v-col",{attrs:{cols:"12"}},t._l(t.songs,(function(a,n){return e("v-col",{key:n,attrs:{cols:"flex"}},[e("v-card",{attrs:{color:a.color,dark:""}},[e("div",{staticClass:"d-flex flex-no-wrap justify-space-between"},[e("div",[e("v-card-title",{staticClass:"headline",domProps:{textContent:t._s(a.name)}}),e("v-card-subtitle",{domProps:{textContent:t._s(a.artist)}}),e("v-card-text",{domProps:{textContent:t._s(a.genre)}})],1),e("table",{attrs:{height:"50%"}},[e("tr",[e("td",{attrs:{valign:"middle",align:"center"}},[e("iframe",{attrs:{src:a.preview,width:"300",height:"80",margin:"10px",frameborder:"0",allowtransparency:"true",allow:"encrypted-media"}})]),e("td",{attrs:{valign:"middle",align:"center"}},[e("span",{staticStyle:{color:"transparent"}},[t._v("holaaaa")]),e("v-btn",{attrs:{icon:""}},[e("v-icon",[t._v("mdi-heart")])],1),e("span",{staticStyle:{color:"transparent"}},[t._v("holaaaa")])],1),e("td",{attrs:{valign:"middle",align:"center"}},[e("v-avatar",{staticClass:"ma-3",attrs:{size:"125",tile:""}},[e("v-img",{attrs:{src:a.cover}})],1)],1)])])])])],1)})),1)],1)],1),e("v-spacer"),e("v-container",{staticStyle:{"font-size":"20pt","font-family":"'Helvetica'",weight:"black",color:"white"},attrs:{justify:"center",align:"center","text-color":"white"}},[t._v("Historial de la aplicación.")]),e("v-spacer"),e("v-navigation-drawer",{staticStyle:{background:"linear-gradient(to left,  #110C3A, #351442, #4C1E45)"},attrs:{temporary:"",absolute:"",color:"#110C3A",dark:""},model:{value:t.drawer,callback:function(a){t.drawer=a},expression:"drawer"}},[e("v-list-item",[e("v-list-item-avatar",[e("v-icon",{attrs:{large:""}},[t._v("mdi-menu")])],1),e("v-list-item-title",[t._v("Menú")]),e("v-btn",{attrs:{icon:""},on:{click:function(a){a.stopPropagation(),t.drawer=!t.drawer}}},[e("v-icon",[t._v("mdi-chevron-left")])],1)],1),e("v-divider"),e("v-list",{staticClass:"pa-0",attrs:{dense:"",flat:""}},[e("v-list-item-group",t._l(t.items,(function(a){return e("v-list-item",{key:a.title,attrs:{to:a.link}},[e("v-list-item-action",[e("v-icon",[t._v(t._s(a.icon))])],1),e("v-list-item-content",[e("v-list-item-title",[t._v(t._s(a.title))])],1)],1)})),1)],1)],1)],1)},st=[],it=e("bc3a"),lt="http://127.0.0.1:3000",ct={props:{source:String},name:"App",data:function(){return{drawer:!1,num:0,dni:this.$route.query.dni,historial:this.$route.query.historial,songs:[],colors:["#952175","#00ACC1","#FFB300","#E91E63","#8BC34A"],items:[{title:"Inicio",icon:"mdi-home",link:"/home"},{title:"Historial de canciones",icon:"mdi-headset",link:"/historial"},{title:"Favoritos",icon:"mdi-heart",link:"/favoritas"},{title:"Ayuda",icon:"mdi-help",link:"/help"}]}},methods:{getSong:function(){var t=this;console.log("ESTOY EN GET SONG"),this.songs=[];for(var a=0;a<this.historial.length;a++)it.get(lt+"/getSongs",{params:{genre:this.historial[a].genre,artist:this.historial[a].artist,busqueda:this.historial[a].busqueda}}).then((function(a){if("No hay canciones que cumplan estos criterios de búsqueda."==a.data[0])alert(a.data[0]);else{console.log(a.data.length),t.num=0;for(var e=0;e<a.data.length;e++)t.songs.push(a.data[e]),t.songs[e]["color"]=t.colors[t.num],t.num=t.num+1,t.num==t.colors.length&&(t.num=0)}}));var e={genre:this.genre,artist:this.artist,type:this.aux,busqueda:this.busqueda};this.historial.push(e),console.log("SALGO DE GET SONG\n\n")}}},dt=ct,ut=Object(l["a"])(dt,rt,st,!1,null,null,null),ht=ut.exports;d()(ut,{VApp:u["a"],VAppBarNavIcon:S["a"],VAvatar:E["a"],VBtn:A["a"],VCard:k["a"],VCardSubtitle:V["b"],VCardText:V["c"],VCardTitle:V["d"],VCol:_["a"],VContainer:w["a"],VDivider:O["a"],VIcon:T["a"],VImg:I["a"],VList:q["a"],VListItem:M["a"],VListItemAction:F["a"],VListItemAvatar:L["a"],VListItemContent:P["a"],VListItemGroup:G["a"],VListItemTitle:P["b"],VNavigationDrawer:z["a"],VRow:B["a"],VSpacer:$["a"],VToolbar:J["a"],VToolbarTitle:Y["a"]});var mt=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-app",{staticStyle:{background:"#110C3A"},attrs:{id:"musica"}},[e("v-card",{attrs:{color:"#110C3A",height:"50px"}},[e("v-toolbar",{staticStyle:{background:"linear-gradient(to right,  #110C3A, #351442, #4C1E45, #351442, #110C3A)"},attrs:{dark:""}},[e("v-app-bar-nav-icon",{on:{click:function(a){t.drawer=!t.drawer}}}),e("v-toolbar-title",[e("span",{staticStyle:{"font-size":"20pt","font-family":"'Helvetica'",weight:"black"}},[t._v(" FAVORITAS DE "+t._s(t.userName))])]),e("v-spacer"),e("v-btn",{attrs:{icon:""},on:{click:function(a){return t.cambiarPantalla("/home")}}},[e("v-icon",[t._v("mdi-home")])],1),e("v-btn",{attrs:{icon:""},on:{click:function(a){return t.cambiarPantalla("/")}}},[e("v-icon",[t._v("mdi-exit-to-app")])],1)],1)],1),e("v-container",{attrs:{fluid:""}},[e("v-row",{attrs:{dense:""}},[e("v-col",{attrs:{cols:"12"}},t._l(t.favoritas,(function(a,n){return e("v-col",{key:n,attrs:{cols:"flex"}},[e("v-card",{attrs:{color:a.color,dark:""}},[e("div",{staticClass:"d-flex flex-no-wrap justify-space-between"},[e("div",[e("v-card-title",{staticClass:"headline",domProps:{textContent:t._s(a.name)}}),e("v-card-subtitle",{domProps:{textContent:t._s(a.artist)}}),e("v-card-text",{domProps:{textContent:t._s(a.genre)}})],1),e("table",{attrs:{height:"50%"}},[e("tr",[e("td",{attrs:{valign:"middle",align:"center"}},[e("iframe",{attrs:{src:a.preview,width:"300",height:"80",margin:"10px",frameborder:"0",allowtransparency:"true",allow:"encrypted-media"}})]),e("td",{attrs:{valign:"middle",align:"center"}},[e("span",{staticStyle:{color:"transparent"}},[t._v("holaaaa")]),e("v-btn",{attrs:{icon:""},on:{click:function(e){return t.deleteFavs(a)}}},[e("v-icon",[t._v(" "+t._s(a.iconF)+" ")])],1),e("span",{staticStyle:{color:"transparent"}},[t._v("holaaaa")])],1),e("td",{attrs:{valign:"middle",align:"center"}},[e("v-avatar",{staticClass:"ma-3",attrs:{size:"125",tile:""}},[e("v-img",{attrs:{src:a.cover}})],1)],1)])])])])],1)})),1)],1)],1),e("v-spacer"),e("v-spacer"),e("v-navigation-drawer",{staticStyle:{background:"linear-gradient(to left,  #110C3A, #351442, #4C1E45)"},attrs:{temporary:"",absolute:"",color:"#110C3A",dark:""},model:{value:t.drawer,callback:function(a){t.drawer=a},expression:"drawer"}},[e("v-list-item",[e("v-list-item-avatar",[e("v-icon",{attrs:{large:""}},[t._v("mdi-menu")])],1),e("v-list-item-title",[t._v("Menú")]),e("v-btn",{attrs:{icon:""},on:{click:function(a){a.stopPropagation(),t.drawer=!t.drawer}}},[e("v-icon",[t._v("mdi-chevron-left")])],1)],1),e("v-divider"),e("v-list",{staticClass:"pa-0",attrs:{dense:"",flat:""}},[e("v-list-item-group",t._l(t.items,(function(a){return e("v-list-item",{key:a.title,on:{click:function(e){return t.cambiarPantalla(a.link)}}},[e("v-list-item-action",[e("v-icon",[t._v(t._s(a.icon))])],1),e("v-list-item-content",[e("v-list-item-title",[t._v(t._s(a.title))])],1)],1)})),1)],1)],1)],1)},vt=[],gt=e("bc3a"),pt="http://127.0.0.1:3000",ft={props:{source:String},name:"App",data:function(){return{drawer:!1,dni:this.$route.query.dni,userName:"",num:0,favoritas:[],songs:[],colors:["#952175","#00ACC1","#FFB300","#E91E63","#8BC34A"],items:[{title:"Inicio",icon:"mdi-home",link:"/home"},{title:"Ayuda",icon:"mdi-help",link:"/help"},{title:"Cerrar Sesión",icon:"mdi-exit-to-app",link:"/"}]}},mounted:function(){console.log("ENTRAMOS EN MOUNTED DE FAVORITAS"),console.log(this.dni),this.getName(),this.getFavs()},methods:{cambiarPantalla:function(t){console.log("QUEREMOS CAMBIAR DE PANTALLA"),"/home"==t?this.$router.replace({path:"/home",query:{dni:this.dni}}):this.$router.push({path:t,query:{dni:this.dni}})},getName:function(){var t=this;gt.post(pt+"/getUserName",{dni:this.dni}).then((function(a){var e={msg:"Error"};JSON.stringify(a.data)==JSON.stringify(e)?alert("Datos mal introducidos"):(console.log(a.data),t.userName=a.data)}))},getFavs:function(){var t=this;console.log("ESTOY en GETFAVS"),console.log(this.dni),gt.post(pt+"/getFavs",{dni:this.dni}).then((function(a){t.num=0;for(var e=0;e<a.data.length;e++)t.favoritas.push(a.data[e]),t.favoritas[e].color=t.colors[t.num],t.favoritas[e].iconF="mdi-heart",t.favoritas[e].iconD="mdi-thumb-down-outline",t.num=t.num+1,t.num==t.colors.length&&(t.num=0)})),setTimeout((function(){console.log(t.favoritas.length),console.log(t.favoritas)}),200)},deleteFavs:function(t){console.log("Entro en eliminar de favoritos");var a=2;if("mdi-heart"==t.iconF?(alert("Canción eliminada de favoritos."),t.iconF="mdi-heart-outline",a=0):(alert("Canción añadida a favoritos."),t.iconF="mdi-heart",a=1),0==a&&gt.post(pt+"/postDeleteRelation",{name:t.name,artist:t.artist,dni:this.dni,type:a}).then((function(t){console.log(t.data)})),1==a&&gt.post(pt+"/postNewSongLiked",{name:t.name,dni:this.dni,artist:t.artist}).then((function(t){console.log(t.data)})),0==a){var e=this.favoritas.indexOf(t.name);this.favoritas.splice(e,1)}else this.favoritas.push(t);console.log("Salgo de eliminar de favoritos")}}},bt=ft,yt=Object(l["a"])(bt,mt,vt,!1,null,null,null),Ct=yt.exports;d()(yt,{VApp:u["a"],VAppBarNavIcon:S["a"],VAvatar:E["a"],VBtn:A["a"],VCard:k["a"],VCardSubtitle:V["b"],VCardText:V["c"],VCardTitle:V["d"],VCol:_["a"],VContainer:w["a"],VDivider:O["a"],VIcon:T["a"],VImg:I["a"],VList:q["a"],VListItem:M["a"],VListItemAction:F["a"],VListItemAvatar:L["a"],VListItemContent:P["a"],VListItemGroup:G["a"],VListItemTitle:P["b"],VNavigationDrawer:z["a"],VRow:B["a"],VSpacer:$["a"],VToolbar:J["a"],VToolbarTitle:Y["a"]});var St=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-app",{staticStyle:{background:"#110C3A"},attrs:{id:"musica"}},[e("v-card",{attrs:{color:"#110C3A",height:"50px"}},[e("v-toolbar",{staticStyle:{background:"linear-gradient(to right,  #110C3A, #351442, #4C1E45, #351442, #110C3A)"},attrs:{dark:""}},[e("v-toolbar-title",[e("span",{staticStyle:{"font-size":"20pt","font-family":"'Helvetica'",weight:"black"}},[t._v(" REGISTRO")])]),e("v-spacer"),e("v-btn",{attrs:{icon:""},on:{click:function(a){return t.cambiarPantalla("Entrada")}}},[e("v-icon",[t._v("mdi-exit-to-app")])],1)],1)],1),e("v-card",{attrs:{color:"#110C3A",height:"30px"}}),e("v-card",{staticStyle:{background:"#110C3A"}},[e("v-row",{attrs:{align:"center",justify:"center"}},[e("v-col",{attrs:{cols:"10"}},[e("v-card",{staticStyle:{background:"linear-gradient(to right, #4C1E45, #351442, #351442, #4C1E45)"},attrs:{dark:""}},[e("v-toolbar",{staticStyle:{background:"linear-gradient(to right, #4C1E45, #351442, #351442, #4C1E45)"},attrs:{dark:""}},[e("v-icon",[t._v(" mdi-badge-account-horizontal ")]),e("v-spacer"),e("v-toolbar-title",[t._v(" Registro de usuario ")])],1),e("v-card-text",[e("v-form",[e("v-text-field",{attrs:{label:"Nombre",type:"text","prepend-icon":"mdi-account-box"},model:{value:t.nombre,callback:function(a){t.nombre=a},expression:"nombre"}}),e("v-text-field",{attrs:{label:"DNI",type:"text","prepend-icon":"mdi-smart-card"},model:{value:t.dni,callback:function(a){t.dni=a},expression:"dni"}}),e("v-text-field",{attrs:{label:"email",type:"text","prepend-icon":"mdi-gmail"},model:{value:t.email,callback:function(a){t.email=a},expression:"email"}}),e("v-text-field",{attrs:{label:"Contraseña",type:"password","prepend-icon":"mdi-lock"},on:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.mostrar(a)}},model:{value:t.contraseña,callback:function(a){t.contraseña=a},expression:"contraseña"}})],1)],1),e("v-card-actions",[e("v-spacer"),e("v-btn",{attrs:{text:""},on:{click:t.mostrar}},[t._v(" Registrar ")])],1)],1)],1)],1)],1)],1)},Et=[],At=e("bc3a"),kt="http://127.0.0.1:3000",Vt={data:function(){return{nombre:"",dni:"",email:"","contraseña":""}},methods:{mostrar:function(){var t=this;if(void 0===this.nombre||""===this.nombre||void 0===this.dni||""===this.dni||void 0===this.email||""===this.email||void 0===this.contraseña||""===this.contraseña)alert("Introduzca todos los parametros");else if(0==this.comprobarFormulario())console.log("Datos incompletos");else{var a={nombre:this.nombre,dni:this.dni,email:this.email,"contraseña":this.contraseña};At.post(kt+"/postNewUser",a).then((function(a){t.comprobarRespuesta(a.data)}))}},comprobarFormulario:function(){return 0==this.comprobarDNI()?(alert("El DNI introducido es incorrecto. Debe tener 8 números y 1 letra."),!1):0==this.comprobarEmail()?(alert("El email introducido es incorrecto. Debe tener un nombre de longitud mínima 3, seguido de un '@' y un servidor de longitud mínima 3, seguido de un '.' y un dominio de longitud mínima 2 y máxima 4"),!1):0!=this.comprobarContraseña()||(alert("La Contraseña introducida es incorrecta. Recuerda que debe tener al menos 3 caracteres."),!1)},comprobarDNI:function(){if(9!=this.dni.length)return!1;for(var t=this.dni.substring(0,8),a=this.dni.substring(8,9),e=0;e<t.length;e++)if(0==this.compruebaNumeros(t[e]))return!1;return 1==this.compruebaLetraDNI(a)},comprobarEmail:function(){if(console.log(this.email),this.email.length<10)return!1;for(var t=0;t<this.email.length;t++)if("@"==this.email[t]){if(t<3)return!1;console.log("tiene @ e i = "+t);for(var a=t;a<this.email.length;a++)if("."==this.email[a]){if(console.log("tiene @ y j = "+a),console.log("j - i = "+(a-t)),a-t<4)return!1;if(this.email.length-a<=6&&this.email.length-a>2)return console.log("longitud - j = "+(this.email.length-a)),!0}else if(a+1==this.email.length)return!1}else if(t+1==this.email.length)return!1},"comprobarContraseña":function(){return!(this.contraseña.length<3)},compruebaNumeros:function(t){switch(t){case"0":return!0;case"1":return!0;case"2":return!0;case"3":return!0;case"4":return!0;case"5":return!0;case"6":return!0;case"7":return!0;case"8":return!0;case"9":return!0}return!1},compruebaLetraDNI:function(t){var a="T,R,W,A,G,M,Y,F,P,D,X,B,N,J,Z,S,Q,V,H,L,C,K,E",e=t.toUpperCase();console.log(e);for(var n=0;n<a.length;n++)if(e==a[n])return!0;return!1},cambiarPantalla:function(t){"Home"==t?(console.log(this.$route.path),this.$router.push({name:"Home",query:{dni:this.dni}})):(console.log(this.$route.path),this.$router.push({name:t}))},comprobarRespuesta:function(t){console.log(t),"si"===t?(alert("Bienvenido: "+this.nombre),this.$emit("entro",this.dni),this.cambiarPantalla("Home")):alert("Ya existe un usuario con DNI:"+this.dni)}}},xt=Vt,Nt=e("4bd4"),_t=Object(l["a"])(xt,St,Et,!1,null,null,null),Dt=_t.exports;d()(_t,{VApp:u["a"],VBtn:A["a"],VCard:k["a"],VCardActions:V["a"],VCardText:V["c"],VCol:_["a"],VForm:Nt["a"],VIcon:T["a"],VRow:B["a"],VSpacer:$["a"],VTextField:H["a"],VToolbar:J["a"],VToolbarTitle:Y["a"]});var wt=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-app",{staticStyle:{background:"#110C3A"},attrs:{id:"musica"}},[e("v-card",{attrs:{color:"#110C3A",height:"50px"}},[e("v-toolbar",{staticStyle:{background:"linear-gradient(to right,  #110C3A, #351442, #4C1E45, #351442, #110C3A)"},attrs:{dark:""}},[e("v-toolbar-title",[e("span",{staticStyle:{"font-size":"20pt","font-family":"'Helvetica'",weight:"bold-black"}},[t._v(" BIENVENIDO ~ Recomendación Musical.")])]),e("v-spacer")],1)],1),e("v-card",{attrs:{color:"#110C3A",height:"30px"}}),e("v-card",{staticStyle:{background:"#110C3A"}},[e("v-row",{attrs:{align:"center",justify:"center"}},[e("v-col",{attrs:{cols:"5"}},[e("v-card",{staticStyle:{background:"linear-gradient(to right, #4C1E45, #351442, #351442, #4C1E45)"},attrs:{dark:""}},[e("v-spacer"),e("v-card-title",[e("v-row",{attrs:{align:"center",justify:"center"}},[e("v-icon",{attrs:{size:"200"}},[t._v("mdi-account")])],1)],1),e("v-card-text",[e("v-row",{attrs:{align:"center",justify:"center"}},[e("v-btn",{attrs:{text:"",large:""},on:{click:function(a){return t.iniciaSesion()}}},[e("p",[e("b",[e("u",[t._v("Iniciar Sesión")])])])])],1),e("v-row",{attrs:{align:"center",justify:"center"}},[e("v-btn",{attrs:{text:"",large:""},on:{click:function(a){return t.registrarse()}}},[e("p",[e("b",[e("u",[t._v("Registrarse")])])])])],1)],1)],1)],1)],1)],1)],1)},Ot=[],Tt={name:"Entrada",methods:{iniciaSesion:function(){console.log("Se ha pulsado inicia sesion"),this.$router.push("IniciarSesion")},registrarse:function(){console.log("Se ha pulsado registrarse"),this.$router.push("Registro")}}},It=Tt,Rt=Object(l["a"])(It,wt,Ot,!1,null,null,null),qt=Rt.exports;d()(Rt,{VApp:u["a"],VBtn:A["a"],VCard:k["a"],VCardText:V["c"],VCardTitle:V["d"],VCol:_["a"],VIcon:T["a"],VRow:B["a"],VSpacer:$["a"],VToolbar:J["a"],VToolbarTitle:Y["a"]});var Mt=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-app",{staticStyle:{background:"#110C3A"},attrs:{id:"musica"}},[e("v-card",{attrs:{color:"#110C3A",height:"50px"}},[e("v-toolbar",{staticStyle:{background:"linear-gradient(to right,  #110C3A, #351442, #4C1E45, #351442, #110C3A)"},attrs:{dark:""}},[e("v-toolbar-title",[e("span",{staticStyle:{"font-size":"20pt","font-family":"'Helvetica'",weight:"black"}},[t._v(" INICIO DE SESIÓN")])]),e("v-spacer"),e("v-btn",{attrs:{icon:""},on:{click:function(a){return t.cambiarPantalla("/")}}},[e("v-icon",[t._v("mdi-exit-to-app")])],1)],1)],1),e("v-card",{attrs:{color:"#110C3A",height:"30px"}}),e("v-card",{staticStyle:{background:"#110C3A"}},[e("v-row",{attrs:{align:"center",justify:"center"}},[e("v-col",{attrs:{cols:"6"}},[e("v-card",{staticStyle:{background:"linear-gradient(to right, #4C1E45, #351442, #351442, #4C1E45)"},attrs:{dark:""}},[e("v-card-title",{staticClass:"justify-center"},[t._v(" Iniciar Sesión ")]),e("v-card-text",[e("v-text-field",{attrs:{type:"text",label:"Usuario(DNI)",outlined:""},model:{value:t.dni,callback:function(a){t.dni=a},expression:"dni"}}),e("v-text-field",{attrs:{type:"password",label:"Contraseña",outlined:""},on:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.comprobarInicioSesion()}},model:{value:t.contraseña,callback:function(a){t.contraseña=a},expression:"contraseña"}})],1),e("v-card-actions",[e("v-spacer"),e("v-btn",{attrs:{text:""},on:{click:function(a){return t.comprobarInicioSesion()}}},[t._v("Iniciar sesion")])],1)],1)],1)],1)],1)],1)},Ft=[],Lt=e("bc3a"),Pt="http://127.0.0.1:3000",Gt={name:"IniciarSesion",data:function(){return{dni:"","contraseña":"",userName:"",alerta:!1,tipoAlerta:"",textoAlerta:""}},methods:{cambiarPantalla:function(t){"/home"==t?this.$router.push({path:"/home",query:{dni:this.dni}}):this.$router.push({path:t})},getName:function(){var t=this;Lt.post(Pt+"/getUserName",{dni:this.dni}).then((function(a){var e={msg:"Error"};JSON.stringify(a.data)==JSON.stringify(e)?alert("Datos mal introducidos"):(console.log(a.data),t.userName=a.data)}))},comprobarInicioSesion:function(){var t=this;console.log(this.dni),console.log(this.contraseña),this.alerta=!1,""==this.dni&&""==this.contraseña?(this.tipoAlerta="error",this.alerta=!0,this.textoAlerta="Por favor, introduce usuario y contraseña"):""==this.dni?(this.tipoAlerta="error",this.alerta=!0,this.textoAlerta="Por favor, introduce tu usuario"):""==this.contrasenña?(this.tipoAlerta="error",this.alerta=!0,this.textoAlerta="Por favor, introduce tu contraseña"):Lt.post(Pt+"/datosEntrada",{dni:this.dni,"contraseña":this.contraseña}).then((function(a){var e={msg:"Error, datos mal introducidos"};console.log(a.json),JSON.stringify(a.data[0])==JSON.stringify(e)||void 0==JSON.stringify(a.data[0])?(t.tipoAlerta="error",t.alerta=!0,t.textoAlerta="Los datos introducidos son incorrectos",alert(t.textoAlerta)):(t.$emit("entro",t.dni),t.getName(),setTimeout((function(){alert("Bienvenido "+t.userName),t.cambiarPantalla("/home")}),100))})).catch((function(t){console.log(t)}))}}},jt=Gt,zt=Object(l["a"])(jt,Mt,Ft,!1,null,null,null),Bt=zt.exports;d()(zt,{VApp:u["a"],VBtn:A["a"],VCard:k["a"],VCardActions:V["a"],VCardText:V["c"],VCardTitle:V["d"],VCol:_["a"],VIcon:T["a"],VRow:B["a"],VSpacer:$["a"],VTextField:H["a"],VToolbar:J["a"],VToolbarTitle:Y["a"]}),n["a"].use(v["a"]);var Ut=[{path:"/home",name:"Home",component:Z},{path:"/help",name:"Help",component:ot},{path:"/favoritas",name:"Favoritas",component:Ct},{path:"/historial",name:"Historial",component:ht},{path:"/registro",name:"Registro",component:Dt},{path:"/",name:"Entrada",component:qt},{path:"/iniciarSesion",name:"IniciarSesion",component:Bt}],$t=new v["a"]({mode:"history",base:"/",routes:Ut}),Ht=$t,Jt=e("2f62");n["a"].use(Jt["a"]);var Yt=new Jt["a"].Store({state:{},mutations:{},actions:{},modules:{}}),Qt=e("f309");n["a"].use(Qt["a"]);var Zt=new Qt["a"]({});e("5363");n["a"].config.productionTip=!1,new n["a"]({router:Ht,store:Yt,vuetify:Zt,render:function(t){return t(m)}}).$mount("#app")},"5ced":function(t,a,e){},cccb:function(t,a,e){"use strict";e("5ced")}});
//# sourceMappingURL=app.f1bb47f2.js.map